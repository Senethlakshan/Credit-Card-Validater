import React, { useState } from 'react';
import axios from 'axios';
import './CSS/ccard.css'

function CreditCardDetails({ nextPage,prevPage }) {

  const [creditCardNumber, setCreditCardNumber] = useState('');
  const [expirationDate, setExpirationDate] = useState('');
  const [cvv, setCvv] = useState('');
  const [cardholderName, setCardholderName] = useState('');
  const [isValid, setIsValid] = useState(false);

  const handleCreditCardNumberChange = (event) => {
    setCreditCardNumber(event.target.value);
    setDisplayCreditCardNumber(event.target.value.replace(/.(?=.{4})/g, "*"));
  };

  const handleSubmit = (event) => {
    event.preventDefault();


    // Validate form input
    const isCreditCardNumberValid = /^\d{16}$/.test(creditCardNumber);
    const isExpirationDateValid = /^(0[1-9]|1[0-2])\/\d{2}$/.test(expirationDate);
    const isCvvValid = /^\d{3,4}$/.test(cvv);
    const isCardholderNameValid = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/.test(cardholderName);
    const isFormValid = isCreditCardNumberValid && isExpirationDateValid && isCvvValid && isCardholderNameValid;
    setIsValid(isFormValid);

    // Submit form data to server
    if (isFormValid) {
      axios.post('/validate-credit-card', {
        creditCardNumber,
        expirationDate,
        cvv,
        cardholderName
      }).then(response => {
        console.log(response);
      }).catch(error => {
        console.error(error);
      });
    }
  };

  return (
    <div className='main-con'>
      <h1 className='tag1'>Credit Card Details</h1>
      <p className='tag1'>Enter your credit card information here</p>

     <div className="form-container">
     <div className="form-box">
     <form className='reg-from ' onSubmit={handleSubmit}>
      <label htmlFor="credit-card-number">Credit Card Number</label>
    <input type="text" id="credit-card-number" value={creditCardNumber} onChange={e => setCreditCardNumber(e.target.value)} />
    

      <label htmlFor="expiration-date">Expiration Date</label>
      <input type="text" id="expiration-date" value={expirationDate} onChange={e => setExpirationDate(e.target.value)} />

      <label htmlFor="cvv">CVV</label>
      <input type="text" id="cvv" value={cvv} onChange={e => setCvv(e.target.value)} />

      <label htmlFor="cardholder-name">Cardholder Name</label>
      <input type="text" id="cardholder-name" value={cardholderName} onChange={e => setCardholderName(e.target.value)} />

      <button className='submitbtn' type="submit">Submit</button>

      {isValid ? null : <p>Please fill in all fields correctly.</p>}
      
    </form>
    
    <button className='nxtbtn' onClick={nextPage}>Next</button><br/>
     <button className='backbtn1' onClick={prevPage}>Previous</button>
     
     </div>
     </div>
    </div>
  );
}

export default CreditCardDetails;


<input type="text" id="credit-card-number" value={creditCardNumber} onChange={handleCreditCardNumberChange} />